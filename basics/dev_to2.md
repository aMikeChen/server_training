## 再次 [dev.to]

[dev.to]: https://dev.to/

- 現在讓我們在看看瀏覽 dev.to 時的狀況

[![dev.to](devto2.png)](devto2.png)

---

## 注意事項

- 我們其實只請求了 `dev.to` 而已，也就是說不管有沒有給「檔案路徑」，一樣會回傳有意義的資訊回來
- 只請求了 `https://dev.to` 這個單一的 URL 卻發生了大量的 Request
- 對 `dev.to` 的第一個 Request 用了 **13ms 的速度** 就完成了
- **與剛才的圖片內容不同**
- （試著舉一些其他的吧）

---

> - 我們其實只請求了 `dev.to` 而已，也就是說不管有沒有給「檔案路徑」，一樣會回傳有意義的資訊回來

- 其實對 Web 伺服器而言，在明確地被要求「檔案」之後，並不一定要將其回傳
  - 如果確定了「**應傳送的資訊**」的話，Web 伺服器可以自由地將其送出
  - 只請求了 `dev.to`(hostname) 的情況下，被視為請求了網站的「首頁」
    - 採用同樣習慣的 Web 伺服器很多
    - 相反地，對以前的基於檔案的網站而言，作為「首頁」所指的檔案實體很多都是命名為 `index.html` 之類的以"index"為開頭的檔案
      - 雖說是「以前的」，但也不是不好的意思。這個方式現在也頻繁地被使用著
  - `dev.to` 所請求的 Web 伺服器會，
    - 讀取作為「首頁」實體的檔案，可能將其內容送出，
    - 或可能作為實體的檔案並不存在於 Web 伺服器的記憶裝置內，而是在被請求的當下由程式去產生
    - 這兩種情況都有可能，但是**從客戶端的角度來看並無差別**
      - 最後發送到客戶端的也只是 Binary 資料，
        Web 瀏覽器若能夠將其解譯成有意義的資訊的話基本上是同等地被處理

---

> - 只請求了 `https://dev.to` 這個單一的 URL 卻發生了大量的 Request

- 這是解譯 HTML 文件並將其描繪出來的時候，
  能夠取得「與文件本身不同存在於他處的檔案」的功能
  - 例如 CSS、JS、圖片、影片、其他的 HTML 等各種對象
  - （去看一下 "Type" 欄位吧）

---

> 對 `dev.to` 的第一個 Request 用了 **13ms 的速度** 就完成了

- 這邊請回憶一下:

  > - 他們將 [**New York City 作為據點**](https://dev.to/about)

---

![Tokyo to NY](tokyo_ny.png)

- 約 10,000km

---

- 組成網際網路的通信網路的基本部分由光纖電纜組成
- 意思就是 1 條電纜內的傳送速度以光速為上限(約 300,000km/s)，
  不過當然是在電纜內部重複反射、曲折，並非直線
  - 實際上似乎是以大約 200,000km/s 為上限
- 然後，以在極短的時間單位光的 on/off 來表現 0 與 1 的 Binary 資料
  - 這部分雖然很廣，但本文件的對象並非網路層因此到此為止
  - [Submarine communications cable](https://www.wikiwand.com/en/Submarine_communications_cable)

---

- 仔細看圖片的話，`dev.to` 所發送出的資料大小為 19.6KB
- 假設到 NY 的 The Practical Dev 公司之間有一條每次可以同時收送約 20KB(160KBits) 
  帶寬足夠的光線電纜，就算是 200,000km/s 也需要花費 50ms！
- 看來對 `dev.to` 的請求回應的 Web 伺服器 **似乎並不在 NY，而是在更接近東京的地方**
- 雖說是當然的，網際網路以及其所組成的 Web，其客戶端與伺服器端 **不管哪邊都不受物理空間的限制**
  - 就算是美國的服務，在日本國內設置 Web 伺服器也完全沒有問題
  - 而且 **對美國的客戶端就由美國的 Web 伺服器回應，而日本的客戶端則由日本的 Web 伺服器回應，這樣是很好的**

---

> - **與剛才的圖片內容不同**

- 簡單想的話，可以推測出內容已經被 Web 伺服器端給更新了
- 另一方面，如果想記住已出現的內容的話，還可以用其他的方法實現

> - 或可能作為實體的檔案並不存在於 Web 伺服器的記憶裝置內，而是在被請求的當下由程式去產生

- 只要當某個 URL 不明確地被提供者更新，「不管對誰都」「持續地回傳」「完全相同的內容」的情況，我們稱之為 **靜態; static** 的內容
- 相反地，「由客戶端」或「依時間點不同」，「而回傳不同的內容」的情況，我們稱之為 **動態; dynamic** 的內容
  - 這些句子都需要注意一下，「變化」可能依組合，或進行於某一層而有所不同
  - 舉例來說，有從 Request 的發送者所送出的內容由 Web 伺服器端改動的情況，
    也有在客戶端透過 JavaScript 改動內容的情況，不管哪種都是「動態」的

---

- `dev.to` 為了「極速化」而採用了許多策略。前面的

  > - 而且 **對美國的客戶端就由美國的 Web 伺服器回應，而日本的客戶端則由日本的 Web 伺服器回應，這樣是很好的**

  - 與此方法結合，對「讓使用者注意不到不管如何都會變慢的部份（**非同步** 的處理）」，
    或是「讓每次產生的動態內容能夠重複使用一段時間（**快取; cache**）」等去下功夫
